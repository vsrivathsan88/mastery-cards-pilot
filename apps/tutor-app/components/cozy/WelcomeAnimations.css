/* Welcome animations for lesson workspace */

/* Fade in + slide up for main panels */
.clean-panel {
  animation: panelFadeIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) backwards;
}

.clean-panel:nth-child(1) {
  animation-delay: 0.1s;
}

.clean-panel:nth-child(2) {
  animation-delay: 0.2s;
}

@keyframes panelFadeIn {
  from {
    opacity: 0;
    transform: translateY(30px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Bottom control bar slides up */
.clean-workspace-bottom {
  animation: bottomSlideUp 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.3s backwards;
}

@keyframes bottomSlideUp {
  from {
    opacity: 0;
    transform: translateY(40px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Pi avatar bounces in */
.clean-avatar {
  animation: avatarBounce 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.5s backwards;
}

@keyframes avatarBounce {
  from {
    opacity: 0;
    transform: scale(0.3) rotate(-20deg);
  }
  to {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

/* Idle Pi animation - subtle breathing */
.clean-avatar:not(.speaking) {
  animation: 
    avatarBounce 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.5s backwards,
    piBreathing 3s ease-in-out 1s infinite;
}

@keyframes piBreathing {
  0%, 100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.03);
  }
}

/* Friendly wave animation on hover */
.clean-avatar:hover:not(.speaking) {
  animation: avatarWave 0.6s ease-in-out;
}

@keyframes avatarWave {
  0%, 100% {
    transform: rotate(0deg);
  }
  25% {
    transform: rotate(-10deg);
  }
  75% {
    transform: rotate(10deg);
  }
}

/* Make progress badge pop in */
.clean-badge {
  animation: badgePop 0.5s cubic-bezier(0.34, 1.56, 0.64, 1) 0.6s backwards;
}

@keyframes badgePop {
  from {
    opacity: 0;
    transform: scale(0.5);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Panel headers slide in from left */
.clean-panel-header {
  animation: headerSlide 0.4s ease-out 0.4s backwards;
}

@keyframes headerSlide {
  from {
    opacity: 0;
    transform: translateX(-20px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

/* Icons spin in */
.clean-panel-icon {
  display: inline-block;
  animation: iconSpin 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.5s backwards;
}

@keyframes iconSpin {
  from {
    opacity: 0;
    transform: rotate(-180deg) scale(0.5);
  }
  to {
    opacity: 1;
    transform: rotate(0deg) scale(1);
  }
}

/* Lesson image scales in */
.clean-panel-content img,
.clean-panel-content svg {
  animation: imageScale 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.7s backwards;
}

@keyframes imageScale {
  from {
    opacity: 0;
    transform: scale(0.8);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Welcoming pulse for workspace background */
.clean-workspace {
  animation: workspaceFadeIn 0.8s ease-out;
}

@keyframes workspaceFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Accessibility: Reduce motion */
@media (prefers-reduced-motion: reduce) {
  .clean-panel,
  .clean-workspace-bottom,
  .clean-avatar,
  .clean-badge,
  .clean-panel-header,
  .clean-panel-icon,
  .clean-panel-content img,
  .clean-panel-content svg,
  .clean-workspace {
    animation: none !important;
  }
  
  /* Still show elements, just without animation */
  .clean-panel,
  .clean-workspace-bottom,
  .clean-avatar,
  .clean-badge,
  .clean-panel-header,
  .clean-panel-icon,
  .clean-panel-content img,
  .clean-panel-content svg {
    opacity: 1;
    transform: none;
  }
}

/* Fun: Make buttons feel more responsive */
.clean-button {
  transition: all 0.2s cubic-bezier(0.34, 1.56, 0.64, 1);
}

.clean-button:active {
  transform: scale(0.95);
}

/* Canvas gets a subtle "ready to draw" glow */
.clean-panel-content:has([data-canvas]) {
  position: relative;
}

.clean-panel-content:has([data-canvas])::before {
  content: '';
  position: absolute;
  inset: -2px;
  border: 2px solid var(--accent-primary);
  border-radius: 14px;
  opacity: 0;
  animation: canvasGlow 2s ease-in-out 1.5s;
}

@keyframes canvasGlow {
  0%, 100% {
    opacity: 0;
  }
  50% {
    opacity: 0.3;
  }
}
